/*!
 * projekktor zwei
 * http://www.projekktor.com
 *
 * Copyright 2010, Sascha Kluger, Spinning Airwhale Media, http://www.spinningairwhale.com
 * under GNU General Public License
 * http://www.projekktor.com/license/
 *
 * You can use, modify and distribute the software, but do so in the spirit of Open Source.
 * You need to leave the copyright notices intact.
 * You need to be able to share any modifications you make to the Projekktor source (not the software Projekktor is integrated to).
 * Give credit where credit is due, spread the word, link to us if you can.
 *
 * Includes jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * ,------------------------------------------,      .    _  .
 * |  Naaah, love shines through !!1!         |      |\_|/__/|
 * |------------------------------------------|     / / \/ \  \
 *                                           \     /__|O||O|__ \
 *                                             \  |/_ \_/\_/ _\ |
 *                                                | | (____) | ||
 *                                                \/\___/\__/  //
 *                                                (_/         ||
 *                                                 |          ||
 *                                                 |          ||\
 *                                                  \        //_/
 *                                                   \______//
 *                                                 __ || __||
 *                                                (____(____)
 */var projekktorPluginInterface=function(){};projekktorPluginInterface.prototype={player:{},config:{},playerDom:null,initialize:function(){},playlistHandler:function(a){},itemHandler:function(a){},detachHandler:function(a){},objectReadyHandler:function(a){},startHandler:function(a){},doneHandler:function(a){},playHandler:function(a){},pauseHandler:function(a){},volumeHandler:function(a){},timeHandler:function(a){},progressHandler:function(a){},mousemoveHandler:function(a){},fullscreenHandler:function(a){},testcardHandler:function(a){}};var projekktorLogo=function(){};projekktorLogo.prototype={player:{},config:{},playerDom:null,logo:null,logoFile:false,fading:false,timePadding:4,initialize:function(){this.logo=$(document.createElement("div")).appendTo(this.playerDom).css({id:this.player.getPublicName()+"_logo",position:"absolute",overflow:"hidden",right:10+"px",top:10+"px",width:100+"px",height:100+"px"}).hide()},itemHandler:function(b){var a="";this.fading=false;this.logo.stop(true,false);this.logo.hide();this.logoFile=(this.config.logo=="")?false:this.config.logo;if(this.logoFile!=false){this.logo.css("background","transparent url("+this.logoFile+") top left no-repeat")}},timeHandler:function(){if(this.logoFile===false){return}var a=this.player.getPosition();var c=this.player.getDuration();var b=this;if(!this.logo.is(":visible")&&!this.fading&&a+this.timePadding<c){if(a>this.timePadding&&c>(this.timePadding*2)){this.fading=true;this.logo.fadeIn("slow",function(){b.fading=false})}}if(this.logo.is(":visible")&&!this.fading){if(a+this.timePadding>c){this.fading=true;this.logo.fadeOut("slow",function(){b.fading=false})}}},testcardHandler:function(){this.logo.hide()}};var projekktorControlbar=function(){};projekktorControlbar.prototype={_controlHideTimer:null,_noControlHide:false,_controlsFading:false,_volumeSliderActive:false,initialize:function(){this.drawControls();this.addGuiListeners();if(this.config.designMode===true){try{$("#"+this.player.getPublicName()+"_"+this.config.playheadDomId).css("width","50%");$("#"+this.player.getPublicName()+"_"+this.config.timeleftDomId).html("00:00 / 12:34");$("#"+this.player.getPublicName()+"_"+this.config.loadedDomId).css("width","100%");this.drawTitle("Phnglui mglwnafh Cthulhu Rlyeh wgahnagl fhtagn.")}catch(a){}}},itemHandler:function(a){var b=(!this.player.getItemCount()<=1&&!this.config.disallowSkip);if(b){$("#"+this.player.getPublicName()+"_"+this.config.prevDomId).show();$("#"+this.player.getPublicName()+"_"+this.config.nextDomId).show()}else{$("#"+this.player.getPublicName()+"_"+this.config.prevDomId).hide();$("#"+this.player.getPublicName()+"_"+this.config.nextDomId).hide()}if(this.config.disablePause){$("#"+this.player.getPublicName()+"_"+this.config.pauseDomId).css("display","none");$("#"+this.player.getPublicName()+"_"+this.config.playDomId).css("display","none")}else{if(this.player.getIsPlaying()===true){this.drawPauseButton()}else{this.drawPlayButton()}}if(this.config.disableFullscreen){$("#"+this.player.getPublicName()+"_"+this.config.fsexitDomId).css("display","none");$("#"+this.player.getPublicName()+"_"+this.config.fsenterDomId).css("display","none")}this.drawTitle(a.title)},objectReadyHandler:function(a){if(this.player.getInFullscreen()==true){this.drawExitFullscreenButton()}else{this.drawEnterFullscreenButton()}this.drawUpdateVolumeDisplay();if(this.player.getIsStarted()==false||this.player.getIsAutoslide()==true){this.hideControlbar(true)}},detachHandler:function(){this.drawUpdateProgressDisplay();this.drawUpdateTimeDisplay();this._noControlHide=false},playHandler:function(){this.drawPauseButton();this.setControlsAutohide()},pauseHandler:function(){this.drawPlayButton();this.setControlsAutohide()},volumeHandler:function(a){this.drawUpdateVolumeDisplay()},progressHandler:function(a){this.drawUpdateProgressDisplay()},timeHandler:function(a){this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()},fullscreenHandler:function(a){if(this.player.getInFullscreen()===true){this.drawExitFullscreenButton()}else{this.drawEnterFullscreenButton()}},addGuiListeners:function(){var a=this;$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId).mouseenter(function(b){a.controlsMouseEnterListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId).mouseleave(function(b){a.controlsMouseLeaveListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId).click(function(b){a.controlsClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId).dblclick(function(b){return false});$("#"+this.player.getPublicName()+"_"+this.config.playDomId).click(function(b){a.playClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.pauseDomId).click(function(b){a.pauseClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.vmaxDomId).click(function(b){a.unmuteClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.muteDomId).click(function(b){a.muteClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.vknobDomId).mousedown(function(b){a.vknobStartDragListener(b,this)});$("#"+this.player.getPublicName()+"_"+this.config.scrubberDomId).click(function(b){a.scrubberClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.fsexitDomId).click(function(b){a.exitFullscreenClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.fsenterDomId).click(function(b){a.enterFullscreenClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.prevDomId).click(function(b){a.prevClickListener(b)});$("#"+this.player.getPublicName()+"_"+this.config.nextDomId).click(function(b){a.nextClickListener(b)})},drawControls:function(){var d=this.config.controlsTemplate;var c="";var a=$(document.createElement("div")).appendTo(this.playerDom).attr({id:this.player.getPublicName()+"_"+this.config.controlsDomId,"class":this.config.cssClassPrefix+"controls"});for(var b in this.config){if(b.indexOf("DomId")==-1){continue}c='id="'+this.player.getPublicName()+"_"+this.config[b]+'" class="'+this.config.cssClassPrefix+b.replace("DomId","")+'"';d=d.replace("{"+b.replace("DomId","")+"}",c)}d=d.replace(/(my_)/g,this.config.cssClassPrefix+"");a.html(d);if(this.config.designMode!==true){a.hide()}},drawTitle:function(a){$("#"+this.player.getPublicName()+"_"+this.config.titleDomId).html(a)},hideControlbar:function(a){clearTimeout(this._controlHideTimer);if(this.config.designMode===true){return}if(this._noControlHide==true&&this.config.controls==true){return}var b=$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId);if(!b.is(":visible")){return}b.stop(true,true);if(this.config.controls==false){b.hide()}else{if(a==true){b.hide()}else{b.fadeOut("slow")}}},showControlbar:function(){var a=this;clearTimeout(this._controlHideTimer);if(this.config.controls==false||this.player.getIsStarted()==false||this.player.getIsAutoslide()==true){return}var b=$("#"+this.player.getPublicName()+"_"+this.config.controlsDomId);if(b.is(":visible")||this._controlsFading==true){a._controlHideTimer=setTimeout(function(){a.hideControlbar()},2500);return}this._controlsFading=true;b.stop(true,true);b.fadeIn("fast",function(){a.drawUpdateVolumeDisplay();a._controlsFading=false})},drawUpdateTimeDisplay:function(){try{var b=this.player.getLoadPlaybackProgress();var d=this.player.getDuration();var a=this.player.getPosition()}catch(c){var b=0;var d=0;var a=0}try{$("#"+this.player.getPublicName()+"_"+this.config.playheadDomId).css("width",b+"%");$("#"+this.player.getPublicName()+"_"+this.config.timeleftDomId).html(this._clockDigits(a)+this.config.timeDelimeter+this._clockDigits(d))}catch(c){}},drawUpdateProgressDisplay:function(){try{$("#"+this.player.getPublicName()+"_"+this.config.loadedDomId).css("width",this.player.getLoadProgress()+"%")}catch(a){}},drawUpdateVolumeDisplay:function(){if(this._volumeSliderActive==true){return}var a=$("#"+this.player.getPublicName()+"_"+this.config.vknobDomId);var b=$("#"+this.player.getPublicName()+"_"+this.config.vsliderDomId);switch(this.config.volume){case 0:$("#"+this.player.getPublicName()+"_"+this.config.vknobDomId).css("left",0);break;case 1:$("#"+this.player.getPublicName()+"_"+this.config.vknobDomId).css("left",(b.width()-(a.width()/2)));break;default:$("#"+this.player.getPublicName()+"_"+this.config.vknobDomId).css("left",this.config.volume*(b.width()-(a.width()/2)));break}$("#"+this.player.getPublicName()+"_"+this.config.vmarkerDomId).css("width",this.config.volume*100+"%")},drawPauseButton:function(a){$("#"+this.player.getPublicName()+"_"+this.config.pauseDomId).css("display","block");$("#"+this.player.getPublicName()+"_"+this.config.playDomId).css("display","none")},drawPlayButton:function(a){$("#"+this.player.getPublicName()+"_"+this.config.pauseDomId).css("display","none");$("#"+this.player.getPublicName()+"_"+this.config.playDomId).css("display","block")},drawEnterFullscreenButton:function(a){$("#"+this.player.getPublicName()+"_"+this.config.fsexitDomId).css("display","none");$("#"+this.player.getPublicName()+"_"+this.config.fsenterDomId).css("display","block")},drawExitFullscreenButton:function(a){$("#"+this.player.getPublicName()+"_"+this.config.fsenterDomId).css("display","none");$("#"+this.player.getPublicName()+"_"+this.config.fsexitDomId).css("display","block")},setControlsAutohide:function(){if(this.config.controls==false){this.hideControlbar(true)}else{var a=this;this.showControlbar();clearTimeout(this._controlHideTimer);this._controlHideTimer=setTimeout(function(){a.hideControlbar()},3500)}},playClickListener:function(a){this.player.sendEvent("play",0);a.stopPropagation()},pauseClickListener:function(a){this.player.sendEvent("pause",0);a.stopPropagation()},controlsMouseEnterListener:function(a){this._noControlHide=true},controlsMouseLeaveListener:function(a){this._noControlHide=false},controlsClickListener:function(a){a.stopPropagation()},mousemoveHandler:function(a){this.showControlbar()},prevClickListener:function(a){this.player.sendEvent("previous",0);a.stopPropagation()},nextClickListener:function(a){this.player.sendEvent("next",0);a.stopPropagation()},muteClickListener:function(a){this.player.sendEvent("volume",0);a.stopPropagation()},unmuteClickListener:function(a){this.player.sendEvent("volume",1);a.stopPropagation()},enterFullscreenClickListener:function(a){this.player.sendEvent("fullscreen",true);a.stopPropagation()},exitFullscreenClickListener:function(a){this.player.sendEvent("fullscreen",false);a.stopPropagation()},startClickListener:function(a){this.player.sendEvent("play",false);a.stopPropagation()},scrubberClickListener:function(c){var b=0;if(c==undefined){return}if(this.config.disallowSkip==true){return}var a=$("#"+this.player.getPublicName()+"_"+this.config.scrubberDomId).width();var d=$("#"+this.player.getPublicName()+"_"+this.config.loadedDomId).width();var e=c.pageX-$("#"+this.player.getPublicName()+"_"+this.config.scrubberDomId).offset().left;if(e<0||e=="NaN"||e==undefined){b=0}else{if(d!=undefined){if(e>d){e=d-1}b=Math.ceil((e*100/a)*this.player.getDuration()/100)*1}}this.player.sendEvent("seek",b);c.stopPropagation()},vknobStartDragListener:function(g,c){var f=this;var a=$(c);var b=Math.abs(parseInt(a.css("left"))-g.clientX);var d=0;this._volumeSliderActive=true;if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}$("#"+this.player.getPublicName()+"_"+this.config.vsliderDomId).mouseup(function(e){$("#"+f.player.getPublicName()+"_"+f.config.vsliderDomId).unbind("mousemove");$("#"+f.player.getPublicName()+"_"+f.config.vsliderDomId).unbind("mouseup");f._volumeSliderActive=false;return false});$("#"+this.player.getPublicName()+"_"+this.config.vsliderDomId).mousemove(function(e){clearTimeout(f._controlHideTimer);var h=(e.clientX-b);h=(h>$(this).width()-a.width())?$(this).width()-(a.width()/2):h;h=(h<0)?0:h;a.css("left",h+"px");d=Math.abs(h/($(this).width()-(a.width()/2)));f.player.sendEvent("volume",d);$("#"+f.player.getPublicName()+"_"+f.config.vmarkerDomId).css("width",d*100+"%");if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}return false})},_clockDigits:function(a){if(a<0||isNaN(a)||a==undefined){return"00:00"}var b=Math.floor(a/60);var c=Math.floor(a%60);return((b<10)?"0"+b:b)+":"+((c<10)?"0"+c:c)}};var playerObjectFLASH=function(){};playerObjectFLASH.prototype={createMediaElement:function(){var b=$("#"+this.environment.publicName+"_media");b.attr("style","width: 100%; height:100%; background-color: #000;");b.html("");this.elementReady=false;var a=this;var c;var d={id:this.environment.publicName+"_media_flash",name:this.environment.publicName+"_media_flash",src:this.config.playerFlashMP4,width:"100%",height:"100%",AllowScriptAccess:"always",wmode:"opaque",bgcolor:"#000000",FlashVars:{src:false,autoplay:false,controlbar:false}};this.createFlash(d,b,"api_get")},flashReadyListener:function(){this.addListeners();this.elementReady=true;this.mediaElement.api_source(this.media.file)},flashReinitListener:function(){try{if($.browser.mozilla){this.mediaElement.api_source(this.media.file);if(this._isPlaying){this.setPlay()}}this.addListeners();this.elementReady=true}catch(a){}},addListeners:function(){this.mediaElement.api_attribute("onprogress","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.progressListener");this.mediaElement.api_attribute("ontimeupdate","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.timeListener");this.mediaElement.api_attribute("onended","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.endedListener");this.mediaElement.api_attribute("onpause","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.pauseListener");this.mediaElement.api_attribute("onplaying","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.playingListener");this.mediaElement.api_attribute("onplay","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.startListener");this.mediaElement.api_attribute("onvolumechange","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.volumeListener");this.mediaElement.api_attribute("onwaiting","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.waitingListener");this.mediaElement.api_attribute("oncanplaythrough","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.canplayListener");this.mediaElement.api_attribute("oncanplay","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.canplayListener");this.mediaElement.api_attribute("onerror","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.errorListener")},removeListeners:function(){try{this.mediaElement.api_attribute("ontimeupdate",false);this.mediaElement.api_attribute("onprogress",false);this.mediaElement.api_attribute("onended",false);this.mediaElement.api_attribute("onpause",false);this.mediaElement.api_attribute("onplaying",false);this.mediaElement.api_attribute("onplay",false);this.mediaElement.api_attribute("onvolumechange",false);this.mediaElement.api_attribute("onwaiting",false);this.mediaElement.api_attribute("oncanplaythrough",false);this.mediaElement.api_attribute("oncanplay",false);this.mediaElement.api_attribute("onerror",false)}catch(a){}},setSeek:function(b){try{this.mediaElement.api_seek(b)}catch(a){}},setVolume:function(a){try{this.mediaElement.api_volume(a)}catch(b){}},setPause:function(a){this._isPlaying=false;try{this.mediaElement.api_pause()}catch(b){}},setPlay:function(a){this._isPlaying=true;try{this.mediaElement.api_play()}catch(b){}},getVolume:function(){try{return this.mediaElement.api_get("volume")}catch(a){}},errorListener:function(a){this.setTestcard(4)}};var playerObjectIMAGE=function(){};playerObjectIMAGE.prototype={createMediaElement:function(){var b=this;var a=$("#"+this.environment.publicName+"_media");a.attr("style","width: 100%; height:100%; background-color: #000; overflow: hidden;");a.html("");this.mediaElement=$(document.createElement("img")).appendTo(a).attr({id:this.environment.publicName+"_media_image",src:this.media.file});this.mediaElement.load(function(c){b.scaleImage()});this.mediaElement.error(function(c){b.scaleImage()});this.elementReady=true},scaleImage:function(){if(this.config.designMode===true){return}var a=$("#"+this.environment.publicName+"_media");this.stretch(this.mediaElement,a.width(),a.height())},setPlay:function(){this._caller.elementUpdateListener("start");this._caller.elementUpdateListener("ended")}};var playerObjectNA=function(){};playerObjectNA.prototype={createMediaElement:function(){this.setTestcard(5,this.media.message);this.elementReady=true}};var playerObjectVIDEO=function(){};playerObjectVIDEO.prototype={allowRandomSeek:false,createMediaElement:function(){var a=$("#"+this.environment.publicName+"_media");a.attr("style","width: 100%; height:100%; background-color: #000;");a.html("");this.elementReady=false;if(this.media.mediaType.indexOf("/ogg")>-1){this.allowRandomSeek=true}this.mediaElement=$(document.createElement("video")).appendTo(a).attr({id:this.environment.publicName+"_media_html",src:this.media.file,controls:false,autoplay:false,autobuffer:false,loop:false}).css({width:"100%",height:"100%"});this.mediaElement=$("#"+this.environment.publicName+"_media_html");this.waitforPlayer()},waitforPlayer:function(){if(this.elementReady==true){return}var c=this;var a=$("#"+this.environment.publicName+"_media_html");try{if(a==undefined){setTimeout(function(){c.waitforPlayer()},500);return}if(a.width()==0||a.height()==0){setTimeout(function(){c.waitforPlayer()},500);return}}catch(b){setTimeout(function(){c.waitforPlayer()},500);return}this.mediaElement=a;this.addListeners();this.elementReady=true},addListeners:function(){this.mediaElement.attr("onpause","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.pauseListener(event)");this.mediaElement.attr("onplaying","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.playingListener(this)");this.mediaElement.attr("onplay","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.startListener(this)");this.mediaElement.attr("onvolumechange","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.volumeListener(this)");this.mediaElement.attr("onprogress","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.progressListener(event)");this.mediaElement.attr("ontimeupdate","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.timeListener(this)");this.mediaElement.attr("onended","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.endedListener(event)");this.mediaElement.attr("onwaiting","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.waitingListener(event)");this.mediaElement.attr("oncanplaythrough","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.canplayListener(event)");this.mediaElement.attr("oncanplay","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.canplayListener(event)");this.mediaElement.attr("onerror","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.errorListener(event)");this.mediaElement.attr("onsuspend","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.suspendListener(event)")},removeListeners:function(){this.mediaElement.attr("onpause","");this.mediaElement.attr("onplaying","");this.mediaElement.attr("onplay","");this.mediaElement.attr("onvolumechange","");this.mediaElement.attr("onprogress","");this.mediaElement.attr("ontimeupdate","");this.mediaElement.attr("onended","");this.mediaElement.attr("onwaiting","");this.mediaElement.attr("oncanplay","");this.mediaElement.attr("oncanplaythrough","");this.mediaElement.attr("onerror","");this.mediaElement.attr("onsuspend","")},updatePlayerInfo:function(){var b=this;var a=4;try{if(this._isPlaying==true){if($.browser.opera){a=3}if(this.mediaElement[0].networkState==a&&this.mediaElement[0].networkState!=undefined){this.errorListener()}setTimeout(function(){b.updatePlayerInfo()},500)}}catch(c){}},detachMedia:function(){try{$(this.mediaElement[0]).attr("src","");this.mediaElement[0].load()}catch(a){}},setPlay:function(){try{this.mediaElement[0].play();this._isPlaying=true}catch(a){}this.updatePlayerInfo()},setPause:function(){try{this.mediaElement[0].pause();this._isPlaying=false}catch(a){}},setVolume:function(a){this.mediaElement.attr("volume",a)},setSeek:function(a){this.mediaElement.attr("currentTime",a)}};var playerObjectYOUTUBE=function(){};playerObjectYOUTUBE.prototype={allowRandomSeek:true,createMediaElement:function(){var b=$("#"+this.environment.publicName+"_media");b.attr("style","width: 100%; height:100%; background-color: #000;");b.html("");this.elementReady=false;var a=this;var c;var d={id:this.environment.publicName+"_media_youtube",name:this.environment.publicName+"_media_youtube",src:"http://www.youtube.com/apiplayer",width:"100%",height:"100%",bgcolor:"#000000",AllowScriptAccess:"always",wmode:"opaque",FlashVars:{enablejsapi:1}};this.createFlash(d,b,"cueVideoById")},flashReadyListener:function(){this._youtubeResizeFix();this.addListeners();this.elementReady=true;this.mediaElement.cueVideoById(this.media.file.replace(/^[^v]+v.(.{11}).*/,"$1"))},flashReinitListener:function(){if($.browser.mozilla){this.mediaElement.cueVideoById(this.media.file.replace(/^[^v]+v.(.{11}).*/,"$1"));if(this._isPlaying){this.setPlay()}}this._youtubeResizeFix();this.addListeners();this.elementReady=true},_youtubeResizeFix:function(){var a=$("#"+this.environment.publicName+"_media");$(this.mediaElement).attr({width:a.width()+"px",height:(a.height()-1)+"px"})},addListeners:function(){this.mediaElement.addEventListener("onStateChange","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.youtubeStateChangeListener");this.mediaElement.addEventListener("onError","PROJEKKTOR["+this.environment.publicIndex+"].playerObject.errorListener")},setSeek:function(b){try{this.mediaElement.seekTo(b,true)}catch(a){}},setVolume:function(a){try{this.mediaElement.setVolume(a*100)}catch(b){}this.volumeListener({})},setPause:function(a){this._isPlaying=false;try{this.mediaElement.pauseVideo()}catch(b){}},setPlay:function(a){try{this.mediaElement.playVideo()}catch(b){}this._isPlaying=true;this.updatePlayerInfo()},getVolume:function(){try{return this.mediaElement.getVolume()/100}catch(a){}},errorListener:function(a){this.setTestcard(4)},youtubeStateChangeListener:function(a){switch(a){case -1:case 0:this.endedListener({});case 1:this.playingListener({});break;case 2:this.pauseListener({});break;case 3:case 5:this.waitingListener({});break}},updatePlayerInfo:function(){var a=this;try{if(this._isPlaying==true){this.timeListener({position:this.mediaElement.getCurrentTime(),duration:this.mediaElement.getDuration()});this.progressListener({loaded:this.mediaElement.getVideoBytesLoaded(),total:this.mediaElement.getVideoBytesTotal()});setTimeout(function(){a.updatePlayerInfo()},500)}}catch(b){}}};var playerObject=function(){};playerObject.prototype={_caller:{},_hideTimer:null,_controlsFading:false,_nohide:false,_isPlaying:false,_isTestcard:false,_hasEnded:false,isAutoslide:false,allowRandomSeek:false,elementReady:false,mediaElement:null,flashVerfiyMethod:"",environment:{},config:{},media:{duration:0,position:0,startOffset:0,file:false,poster:"",ended:false,message:"",error:null,mediaType:"",loadProgress:0},init:function(b){var a=this;this._caller=b.caller;$.extend(this.environment,b.caller.environment);$.extend(this.config,b.caller.config);this.media=b.media;this.createMediaElement();this.waitForPlayerElement()},createMediaElement:function(){},waitForPlayerElement:function(){var a=this;if(this.elementReady!==true){setTimeout(function(){a.waitForPlayerElement()},500);return}try{this._caller.playerObjectReady()}catch(b){$C.log(b)}},addListeners:function(){},removeListeners:function(){},detachMedia:function(){},destroy:function(){this.setPause();this.removeListeners();this.detachMedia();$(this.mediaElement).remove()},reInit:function(){if(this.flashVerfiyMethod==""||!($.browser.mozilla)||this._isTestcard==true){this.flashReinitListener();this._caller.elementUpdateListener("canvas");return}this.elementReady=false;this.removeListeners();this._reInitWait(false)},applyCommand:function(b,a){switch(b){case"play":this.setPlay();break;case"pause":this.setPause();break;case"volume":this.setVolume(a);break;case"seek":this.setSeek(a);break;case"fullscreen":this.setFullscreen(a);break}},setPrev:function(){},setNext:function(){},setSeek:function(a){},setPlay:function(){},setPause:function(){},setVolume:function(a){},setFullscreen:function(a){this.environment.inFullscreen=a;this._caller.elementUpdateListener("fullscreen");this.reInit()},getVolume:function(){var a=this.mediaElement.attr("muted");return(a==true)?0:this.mediaElement.attr("volume")},getLoadProgress:function(){return this.media.loadProgress},getLoadPlaybackProgress:function(){return this.media.playProgress},getPosition:function(){return this.media.position},getDuration:function(){return this.media.duration},getInFullscreen:function(){return this.environment.inFullscreen},getIsAutoslide:function(){return this.isAutoslide},timeListener:function(d){if(d==undefined){return}var c=(d.position!=undefined)?d.position:d.currentTime;var b=d.duration;var a=(c>0&&b>0)?c*100/b:0;this.media.duration=b;this.media.position=c;this.media.playProgress=a;this._caller.elementUpdateListener("time")},progressListener:function(d){if(d==undefined){return}if(d.loaded==undefined){return}if(this.media.loadProgress>99&&this.media.loadProgress!=undefined){return}var c=d.loaded;var b=d.total;var a=(c>0&&b>0)?c*100/b:0;this.media.loadProgress=(this.media.loadProgress<100||this.media.loadProgress==undefined)?a:100;this.media.loadProgress=(this.allowRandomSeek===true)?100:this.media.loadProgress;this._caller.elementUpdateListener("progress")},canplayListener:function(a){this._caller.elementUpdateListener("canplay")},canplaythroughListener:function(a){this._caller.elementUpdateListener("canplaythrough")},suspendListener:function(a){this._caller.elementUpdateListener("suspend")},playingListener:function(a){this._caller.elementUpdateListener("play")},startListener:function(a){this._caller.elementUpdateListener("start")},pauseListener:function(a){this._caller.elementUpdateListener("pause")},volumeListener:function(a){this._caller.elementUpdateListener("volume")},endedListener:function(a){this._hasEnded=true;this._caller.elementUpdateListener("ended")},suspendListener:function(a){this.media.loadProgress=100;this._caller.elementUpdateListener("suspend")},waitingListener:function(a){this._caller.elementUpdateListener("waiting")},flashReadyListener:function(){},flashReinitListener:function(){},errorListener:function(a){this._isPlaying=false;try{switch(a.target.error.code){case a.target.error.MEDIA_ERR_ABORTED:this.setTestcard(1);break;case a.target.error.MEDIA_ERR_NETWORK:this.setTestcard(2);break;case a.target.error.MEDIA_ERR_DECODE:this.setTestcard(3);break;case a.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.setTestcard(4);break;default:this.setTestcard(5);break}}catch(b){this.setTestcard(4)}},setTestcard:function(e,a){this._isTestcard=true;var d=this;var c=$("#"+this.environment.publicName+"_media");var b=(this.config.messages[e]!=undefined)?this.config.messages[e]:this.config.messages[0];b=(a!=undefined&&a!="")?a:b;if(this._caller.getItemCount()>1){b+=this.config.messages[99]}if(b.length<3){b="ERROR"}this.destroy();c.attr("style","width: 100%; height:100%; background-color: #000;");c.html("");this.mediaElement=$(document.createElement("div")).attr({"class":"pptestcard"}).appendTo(c);$(document.createElement("p")).appendTo(this.mediaElement).html(b);this._caller.elementUpdateListener("testcard")},stretch:function(d,j,g){var c=d.width();var a=d.height();var e=j/c;var h=g/a;var b=0;var f=0;if(e>h){b=Math.round(c*e);f=Math.round(a*e);d.width(Math.round(c*e));d.height(Math.round(a*e))}else{b=Math.round(c*h);f=Math.round(a*h);d.width(Math.round(c*h));d.height(Math.round(a*h))}d.css({"margin-left":Math.round(j/2-b/2)+"px","margin-top":Math.round(g/2-f/2)+"px"})},toAttributeString:function(b){var c="";for(var a in b){if(typeof b[a]!="function"){c+=a+'="'+b[a]+'" '}}return c},toFlashvarsString:function(b){var c="";for(var a in b){if(typeof b[a]!="function"){c+=a+"="+encodeURIComponent(b[a])+"&"}}return c.replace(/&$/,"")},createFlash:function(g,b,c){this.flashVerfiyMethod=c;if(g.FlashVars){g.FlashVars=this.toFlashvarsString(g.FlashVars);g.src=g.src+"?"+g.FlashVars;delete (g.FlashVars)}var a="";var e="";var d="";var f="";if($.browser.msie){f=' id="'+g.id+'" '}var e="<object"+f+' codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"  name="'+g.name+'" width="'+g.width+'" height="'+g.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">';e+='<param name="movie" value="'+g.src+'"></param>';e+='<param name="AllowScriptAccess" value="'+g.AllowScriptAccess+'"></param>';e+='<param name="wmode" value="'+g.wmode+'"></param>';var d="<embed "+this.toAttributeString(g)+' pluginspage="http://www.macromedia.com/go/getflashplayer" swliveconnect="true" type="application/x-shockwave-flash"></embed>';a=e+d;a+="</object>";if($.browser.mozilla){a=d}b[0].innerHTML=a;this.mediaElement=$("#"+g.id)[0];this._waitforPlayer()},_waitforPlayer:function(){if(this.elementReady==true){return}var a=this;try{if(this.mediaElement==undefined){setTimeout(function(){a._waitforPlayer()},500);return}if(this.mediaElement[this.flashVerfiyMethod]==undefined){setTimeout(function(){a._waitforPlayer()},500);return}}catch(b){setTimeout(function(){a._waitforPlayer()},500);return}this.flashReadyListener()},_reInitWait:function(a){var b=this;try{if(this.mediaElement[this.flashVerfiyMethod]==undefined&&a==true){setTimeout(function(){b._reInitWait(false)},50);return}else{if(this.mediaElement[this.flashVerfiyMethod]!=undefined&&a!=true){setTimeout(function(){b._reInitWait(true)},50);return}else{if(this.mediaElement[this.flashVerfiyMethod]==undefined){setTimeout(function(){b._reInitWait(true)},50);return}}}this._caller.elementUpdateListener("canvas");this.flashReinitListener()}catch(c){}}};var PROJEKKTOR=[];if(typeof jQuery==="undefined"){alert("Projekktor Warning [1]: JQuery 1.4.2 or later required.")}else{$(document).ready(function(){var b=$("video");for(var a=0;a<b.length;a++){PROJEKKTOR[a]=new projekktor_player();PROJEKKTOR[a].initialize(b[a],a)}return})}function projekktor_player(){this.config=$.extend({plugins:["projekktorControlbar","projekktorLogo"],version:"0.7.2",cssClassPrefix:"pp",playerFlashMP4:"playerMP4.swf",desginGrid:"layout_grid.gif",themesPath:"",designMode:false,theme:"tll",volume:0.5,poster:false,loop:false,autoplay:false,controls:false,disablePause:false,disallowSkip:false,disableFullscreen:false,playheadDomId:"playhead",timeleftDomId:"timeleft",loadedDomId:"loaded",scrubberDomId:"scrubber",playDomId:"play",pauseDomId:"pause",prevDomId:"prev",nextDomId:"next",fsexitDomId:"fsexit",fsenterDomId:"fsenter",vsliderDomId:"vslider",vmarkerDomId:"vmarker",vknobDomId:"vknob",muteDomId:"mute",vmaxDomId:"vmax",bufferingDomId:"buffering",startDomId:"start",controlsDomId:"controls",titleDomId:"title",timeDelimeter:" | ",controlsTemplate:"<div {fsexit}></div><div {fsenter}></div><div {play}></div><div {pause}></div><div {prev}></div><div {next}></div><div {title}></div><div {timeleft}></div><div {scrubber}><div {loaded}></div><div {playhead}></div></div><div {vslider}><div {vmarker}></div><div {vknob}></div></div><div {mute}></div><div {vmax}></div>",canvasId:"canvas",bufferIconDelay:1000,messages:{0:"An unknown error occurred. ",1:"You aborted the video playback. ",2:"A network error caused the video download to fail part-way. ",3:"The video playback was aborted due to a corruption problem. ",4:"The video could not be loaded, either because the server or network failed or because the format is not supported. ",5:"Sorry, your browser does not support the media format of the requested clip. ",98:"Invalid Playlist Data!",99:"Hit NEXT to proceed. "}},(typeof PROJEKKTOR_CONFIG=="object")?PROJEKKTOR_CONFIG:{});this._configBuffer={};this.environment={publicIndex:0,publicName:null,playerStyle:null,scrollTop:null,scrollLeft:null,bodyOverflow:null,inFullscreen:false,zIndex:"auto",playerDOM:{}};this.properties={itemsOffset:false,itemsLimit:10,currentItem:0};this.priorities={video:10,youtube:10,flash:1,image:10};this.fileTypes={".ogv":{type:"video/ogg",model:"video",platform:"native"},".ogg":{type:"video/ogg",model:"video",platform:"native"},".anx":{type:"video/ogg",model:"video",platform:"native"},".jpg":{type:"image/jpeg",model:"image",platform:"native"},".gif":{type:"image/gif",model:"image",platform:"native"},".png":{type:"image/png",model:"image",platform:"native"},".flv":{type:"video/x-flv",model:"flash",platform:"flash"},".flv":{type:"video/flv",model:"flash",platform:"flash"},".mp4":{type:"video/mp4",model:"flash",platform:"flash"},".mov":{type:"video/quicktime",model:"flash",platform:"flash"},"youtube.com":{type:"video/youtube",model:"youtube",platform:"flash",fixed:true}};this.media=[];this.plugins=[];this.mediaGrid={};this.playerObject=null;this._caller={};this._bufferDelayTimer=null;this._isReady=false;this._isStarted=false;this._isPlaying=false;this._isWaiting=false;this.initialize=function(destDOM,myIndex){var ref=this;var sources=this._getSourcesFromContainer($(destDOM));this.config.autoplay=($(destDOM).attr("autoplay")!==undefined&&$(destDOM).attr("autoplay")!==false);this.config.controls=($(destDOM).attr("controls")!==undefined&&$(destDOM).attr("controls")!==false);this.config.loop=($(destDOM).attr("loop")!==undefined&&$(destDOM).attr("loop")!==false);this.config.poster=($(destDOM).attr("poster")!==undefined&&$(destDOM).attr("poster")!==false)?$(destDOM).attr("poster"):false;this._loadTheme(this.config.theme);if(this.config.designMode===true){this.config.poster=this.config.desginGrid}this.environment.publicName=this._randomId(8);this.environment.publicIndex=myIndex;this.environment.playerDom=this.drawPlayer(destDOM);this.mediaGrid=this._testMediaSupport();this.resizePluginCanvas(this.environment.playerDom);this.registerPlugins();this._configBuffer=$.extend(true,{},this.config);for(var i in sources){if(sources[i].type=="text/json"){try{data=$.parseJSON(sources[i].src);this.reelUpdate(data)}catch(e){$.get(sources[i].src,{},function(json){ref.reelUpdate(json)})}return}}this.reelUpdate({0:{file:sources}})};this.reelUpdate=function(data){if(typeof data=="string"){try{data=$.parseJSON(data)}catch(e){data=[{file:"none",type:"NA",message:this.config.messages[98]}]}}try{var setValue=null;for(var props in data.config){this.config[props]=this._cleanValue(data.config[props])}delete (data.config)}catch(e){}if(this.config.poster!==false&&(this.config.autoplay!==true||this.config.designMode===true)){this.media[this.media.length]={file:this.config.poster}}for(var items in data){if(data[items].file==undefined){continue}this.media[this.media.length]=this._cleanValue(data[items])}this._bubbleEvent("playlist",{});this.playItem(this.properties.currentItem)};this.playItem=function(idx){var ref=this;var mediaFile="";var mediaType="";var mediaModel="playerObjectNA";var extension="";var lastLevel=0;this._isReady=false;if(this.media[idx]._VALIDATED!==true){if(typeof this.media[idx].file=="string"){this.media[idx].file=[{src:this.media[idx].file}]}var sourceObj={};for(var index in this.media[idx].file){sourceObj=this.media[idx].file[index];if(typeof sourceObj=="string"){sourceObj={src:sourceObj}}if(sourceObj.type==undefined){extension=sourceObj.src.substr(0,((sourceObj.src.indexOf("?")!=-1)?sourceObj.src.indexOf("?"):sourceObj.src.length));extension=extension.substr(extension.lastIndexOf("."),4).toLowerCase();sourceObj.type=(this.fileTypes[extension]==undefined)?"NA":this.fileTypes[extension]["type"];sourceObj.ext=extension}else{for(var extensions in this.fileTypes){if(this.fileTypes[extensions]["type"]!=sourceObj.type){continue}sourceObj.ext=extensions}}try{if(lastLevel<this.priorities[this.fileTypes[sourceObj.ext]["model"]]&&this.mediaGrid[this.fileTypes[sourceObj.ext]["type"]]!="NA"){lastLevel=this.priorities[this.fileTypes[sourceObj.ext]["model"]];mediaModel="playerObject"+(this.mediaGrid[this.fileTypes[sourceObj.ext]["type"]].toUpperCase());mediaFile=sourceObj.src;mediaType=sourceObj.type}}catch(e){}if(index==="src"){break}}if(typeof eval(mediaModel)!=="function"){mediaModel="playerObjectNA"}}if(this.media[idx]._VALIDATED!==true){if(sourceObj.title!=undefined){this.media[idx].title=sourceObj.title}this.media[idx].file=mediaFile;this.media[idx].mediaType=mediaType;this.media[idx].mediaModel=mediaModel;this.media[idx]._VALIDATED=true}$.extend(this.config,this._configBuffer);$.extend(this.config,this.media[idx]);this.playerObject=new playerObject();$.extend(this.playerObject,eval(this.media[idx].mediaModel).prototype);this.properties.currentItem=idx;this.playerObject.init({media:this.media[idx],caller:ref});this._bubbleEvent("item",this.media[idx])};this.playerObjectReady=function(){this._isReady=true;this.addGUIListeners();if(this.config.autoplay==true||this._isStarted==true){this.showBufferIcon(true);this.playerObject.applyCommand("play")}else{this.showStartIcon()}this._bubbleEvent("objectReady",{})};this.addGUIListeners=function(){var ref=this;if(this.config.designMode===true){return}$("#"+this.environment.publicName).click(function(event){ref.displayClickListener(event)});$("#"+this.environment.publicName).dblclick(function(event){ref.displayDblClickListener(event)});$("#"+this.environment.publicName).mousemove(function(event){ref.displayMousemoveListener(event)})};this.removeGUIListeners=function(){$("#"+this.environment.publicName).unbind()};this.registerPlugins=function(){for(var i=0;i<this.config.plugins.length;i++){var pluginName=this.config.plugins[i];var pluginObj=$.extend(new projekktorPluginInterface(),eval(pluginName).prototype);pluginObj.player=this;pluginObj.config=this.config;pluginObj.playerDom=$("#"+this.environment.publicName+"_"+this.config.canvasId);pluginObj.initialize();this.plugins.push(pluginObj)}};this.unbindPlugins=function(){for(var j=0;j<this.plugins.length;j++){$(this.plugins[j]).unbind()}};this._bubbleEvent=function(eventType,data){for(var i in this.plugins){try{this.plugins[i][eventType+"Handler"](data)}catch(e){}}};this.playPreviousItem=function(obj,data){if(this._isReady==false){return}this.detachPlayerObject();var result=this.properties.currentItem-1;if(this.media[result]===undefined){result=this.media.length-1}this.playItem(result)};this.playNextItem=function(obj,data){if(this._isReady==false){return}this.detachPlayerObject();var result=this.properties.currentItem+1;if(this.media[result]===undefined){result=0;if(this.config.loop===false){this._isStarted=false;this._bubbleEvent("done",{})}}this.playItem(result)};this.elementUpdateListener=function(type){switch(type){case"pause":if(this.config.disablePause==true){this.playerObject.applyCommand("play",0);break}if(this._isPlaying===true){this._isPlaying=false;this._bubbleEvent("pause",{})}break;case"start":if(this._isStarted==false){this._isStarted=true;this.hideStartIcon();this._bubbleEvent("start",{})}this.playerObject.applyCommand("volume",this.config.volume);case"play":if(this._isPlaying===false){this._isPlaying=true;this._bubbleEvent("play",{});this.playerObject.applyCommand("volume",this.config.volume)}this.hideBufferIcon();break;case"testcard":this._isWaiting=false;this.hideBufferIcon();this._bubbleEvent("testcard",{});break;case"volume":this.config.volume=this.playerObject.getVolume();this._bubbleEvent("volume",{});break;case"suspend":this._isWaiting=false;this.hideBufferIcon();case"progress":this._bubbleEvent("progress",{});break;case"time":this._bubbleEvent("time",{});break;case"fullscreen":if(this.config.disableFullscreen==true){break}this.environment.inFullscreen=this.playerObject.getInFullscreen();this.drawFullscreen();this._bubbleEvent("fullscreen",{});break;case"canvas":this.resizePluginCanvas($("#"+this.environment.publicName));break;case"ended":this.playNextItem();this.hideBufferIcon();break;case"waiting":this._isWaiting=true;this.showBufferIcon();break;case"canplaythrough":case"canplay":this._isWaiting=false;this.hideBufferIcon();break}};this.detachPlayerObject=function(){$(this).unbind();this.unbindPlugins();this.playerObject.destroy();this.removeGUIListeners();this.playerObject=null;this._bubbleEvent("detach",{})};this.displayClickListener=function(evt){var ref=this;if(!this._isPlaying||!this._isStarted){this.playerObject.applyCommand("play",false)}else{this.playerObject.applyCommand("pause",false)}evt.stopPropagation()};this.displayDblClickListener=function(evt){var ref=this;if(!this._isStarted){return}else{if(this.environment.inFullscreen){this.playerObject.applyCommand("fullscreen",false)}else{this.playerObject.applyCommand("fullscreen",true)}}evt.stopPropagation()};this.displayMousemoveListener=function(evt){this._bubbleEvent("mousemove",{});evt.stopPropagation()};this.keyListener=function(evt){switch(evt.keyCode){case 27:if(!this.playerObject.getInFullscreen()){break}this.playerObject.applyCommand("fullscreen",false);break}evt.stopPropagation()};this.hideBufferIcon=function(){var ref=this;if(this._isStarted!=true&&this._isWaiting!=true){return}clearTimeout(this._bufferDelayTimer);var target=$("#"+this.environment.publicName+"_"+this.config.bufferingDomId);target.stop(true,true);target.fadeOut("fast")};this.showBufferIcon=function(instant){var ref=this;clearTimeout(this._bufferDelayTimer);if(this._isWaiting==false){return}if(instant!=true){ref._bufferDelayTimer=setTimeout(function(){ref.showBufferIcon(true)},ref.config.bufferIconDelay);return}var target=$("#"+this.environment.publicName+"_"+this.config.bufferingDomId);target.stop(true,true);target.fadeIn("fast")};this.hideStartIcon=function(){var target=$("#"+this.environment.publicName+"_"+this.config.startDomId);target.hide()};this.showStartIcon=function(delay){if(this._isStarted==true){return}var target=$("#"+this.environment.publicName+"_"+this.config.startDomId);target.show()};this.drawPlayer=function(destDOM){var result=$(document.createElement("div")).attr({id:this.environment.publicName,style:$(destDOM).attr("style"),"class":"projekktor"}).css("overflow","hidden").css("width",$(destDOM).attr("width")+"px").css("height",$(destDOM).attr("height")+"px");$(destDOM).replaceWith(result);$(document.createElement("div")).appendTo(result).attr({id:this.environment.publicName+"_"+this.config.canvasId});var daPlayer=$(document.createElement("div")).appendTo(result).attr({id:this.environment.publicName+"_media",style:"width:100%; height:100%;"});$(document.createElement("div")).appendTo(result).attr({id:this.environment.publicName+"_"+this.config.bufferingDomId,"class":this.config.cssClassPrefix+"buffering"});$(document.createElement("div")).appendTo(result).attr({id:this.environment.publicName+"_"+this.config.startDomId,"class":this.config.cssClassPrefix+"start"});try{$("#projekktorver").html("V"+this.config.version)}catch(e){}return result};this.drawFullscreen=function(){var playerDom=$("#"+this.environment.publicName);var ref=this;if(this.environment.inFullscreen==true){this.environment.playerStyle=playerDom.attr("style");this.environment.zIndex=playerDom.css("z-index");this.environment.bodyOverflow=$("body").css("overflow");this.environment.scrollTop=$(window).scrollTop();this.environment.scrollLeft=$(window).scrollLeft();$(window).scrollTop(0);$(window).scrollLeft(0);playerDom.attr("style","position: absolute; display: block; top:0; left:0; width:100%; height:100%; z-index:9999;");$("body").css("overflow","hidden");$(window).resize(function(){ref.resizePluginCanvas(playerDom)})}else{$(window).scrollTop(this.environment.scrollTop);$(window).scrollLeft(this.environment.scrollLef);$("body").css("overflow",this.environment.bodyOverflow);playerDom.attr("style",this.environment.playerStyle);playerDom.css("z-index",this.environment.zIndex);$(window).unbind("resize")}};this.resizePluginCanvas=function(target){$("#"+this.environment.publicName+"_"+this.config.canvasId).css({padding:0,margin:0,zIndex:9001,overflow:"hidden",position:"absolute",width:target.width()+"px",height:target.height()+"px"})};this.getItemCount=function(){return(this.config.poster===false||this.config.autoplay===true)?this.media.length:this.media.length-1};this.getIsAutoslide=function(){return this.playerObject.getIsAutoslide()};this.getIsStarted=function(){return this._isStarted};this.sendEvent=function(command,parameter){switch(command){case"next":if(this.config.disallowSkip==true){break}this.playNextItem();break;case"previous":if(this.config.disallowSkip==true){break}this.playPreviousItem();break;default:this.playerObject.applyCommand(command,parameter)}};this.getLoadProgress=function(){try{return this.playerObject.getLoadProgress()}catch(e){return 0}};this.getLoadPlaybackProgress=function(){try{return this.playerObject.getLoadPlaybackProgress()}catch(e){return 0}};this.getDuration=function(){try{return this.playerObject.getDuration()}catch(e){return 0}};this.getPosition=function(){try{return this.playerObject.getPosition()}catch(e){return 0}};this.getInFullscreen=function(){return this.environment.inFullscreen};this.getPublicName=function(){return this.environment.publicName};this.getIsPlaying=function(){return this._isPlaying};this._testMediaSupport=function(){var result=[];var hasNativeAudio=false;var flashVerison=this._flashVersion().match(/\d+/g);var hasFlash=(flashVerison[0]>0);var nativeElementType="";for(i in this.fileTypes){result[this.fileTypes[i]["type"]]="NA";if(this.fileTypes[i]["model"]=="image"&&this.fileTypes[i]["platform"]=="native"){result[this.fileTypes[i]["type"]]="image";continue}if(hasFlash==true&&this.fileTypes[i]["platform"]=="flash"){result[this.fileTypes[i]["type"]]=this.fileTypes[i]["model"]}if(this.fileTypes[i]["fixed"]!==true){if((this.fileTypes[i]["type"].indexOf("video")>-1||this.fileTypes[i]["type"].indexOf("audio")>-1)){try{nativeElementType=(this.fileTypes[i]["type"].indexOf("video")>-1)?"video":"audio";var testObject=document.createElement(nativeElementType);if(testObject.canPlayType!=false){if(("no"!=testObject.canPlayType(this.fileTypes[i]["type"]))&&(""!=testObject.canPlayType(this.fileTypes[i]["type"]))){result[this.fileTypes[i]["type"]]=nativeElementType}}}catch(e){}}}}return result};this._getSourcesFromContainer=function(target){if(target==undefined){return""}var result={};var i=0;var poster=false;var title="";if(target.attr("poster")){poster=target.attr("poster")}if(target.attr("title")){title=target.attr("title")}if(target.attr("src")){result[i]={src:target.attr("src"),type:target.attr("type"),poster:poster,title:title};i++}$(target).children().each(function(){if($(this).attr("src")){result[i]={src:$(this).attr("src"),type:$(this).attr("type"),poster:poster,title:title};i++}});return result};this._randomId=function(length){var chars="abcdefghiklmnopqrstuvwxyz";var result="";for(var i=0;i<length;i++){var rnum=Math.floor(Math.random()*chars.length);result+=chars.substring(rnum,rnum+1)}return result};this._flashVersion=function(){try{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{axo.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(e){}}return"0,0,0"};this._cleanValue=function(value){switch(value){case"false":return false;case"true":return true;case"null":return null;case"undefined":return"";default:return value}};this._loadTheme=function(themeName){if(themeName==""){return}$("head").append("<link>");css=$("head").children(":last");css.attr({rel:"stylesheet",type:"text/css",href:this.config.themesPath+"projekktor_theme_"+themeName+".css"})}};